---
title: ネットワークセキュリティのベストプラクティス
description: "Weaviate デプロイメントのネットワークセキュリティを最大化するための専門的な推奨事項。"
---

# ベストプラクティスとヒント

このページは、 Weaviate デプロイメント向けの AWS 固有のネットワークベストプラクティスをまとめたリファレンスです。ここでは、 Weaviate デプロイメントを保護するために設計されたネットワークセキュリティアーキテクチャについて説明します。

:::tip 

- 一般的なベストプラクティスが必要な場合は [こちら](/docs/weaviate/best-practices/index.md) を参照してください。

- デプロイメント固有のベストプラクティスが必要な場合は [こちら](/docs/deploy/faqs/index.md) を参照してください。

:::

### 堅牢なネットワークセキュリティアーキテクチャの要件

- ネットワーク分割とアクセス制御により攻撃対象領域を最小化します。  
- セキュリティ境界を維持しながら自動スケーリングを可能にします。  
- 包括的なディザスタリカバリにより高可用性を確保します。  
- エンドツーエンドの可観測性と脅威検知を提供します。  
- セキュアな管理アクセスパターンを確立します。  

### アクセス制御

アクセス制御はこのネットワークセキュリティ戦略の要です。ゼロトラストモデルを採用し、あらゆるアクセス要求を継続的に検証します。

#### プライベートサブネット戦略

ネットワーク分離は本戦略の基盤です。重要なインフラストラクチャはインターネット接続を持たないプライベートサブネットに配置します。これによりインターネット経由の攻撃を排除し、すべてのアクセスを管理されたエントリポイント経由に限定します。

#### 主要コンポーネント

- プライベートサブネットと、制御されたアウトバウンドインターネットアクセスを提供する NAT ゲートウェイ  
- すべての管理アクセスに対する多要素認証 ( MFA )  
- 最小権限の原則を具体化したセキュリティグループによる細かなアクセス許可  
- WAF を統合した ALB  

#### アクセスパターン

- 受信トラフィックはロードバランサーとセキュリティグループでフィルタリング  
- 送信トラフィックは NAT ゲートウェイで制御し、ログを取得  
- 管理アクセスは VPN と強力な認証を必須化  
- 組織構造に沿った RBAC  

#### セキュアな管理アクセスのための VPN 戦略

- 企業オフィス接続用の site-to-site VPN  
- 管理アクセス用のクライアント VPN と個別証明書  
- 高可用性を実現するマルチ AZ の VPN ゲートウェイ  

### Kubernetes アクセス制御

#### 管理コントロール

- `kubectl` アクセスは確立済みの VPN 接続が必須  
- 企業 IDP との統合  
- すべての管理操作に MFA を適用  
- セッションタイムアウトとアクティビティ監視  

### 多層防御によるネットワークアーキテクチャ

ネットワーク分割によってセキュリティ境界を作り、侵害時の影響範囲を限定します。この多層防御戦略では水平・垂直の両方で分割を行います。

#### アプリケーション層の分割

アプリケーション層には、顧客向けサービスとビジネスロジックコンポーネントを配置します。

- 環境ごと ( development 、 staging 、 production ) に専用サブネット  
- すべての HTTP / HTTPS 受信トラフィックを検査する WAF  
- Kubernetes ネットワークポリシーによるコンテナネットワーク分離  
- API ゲートウェイによる認証とレート制限の強制  

#### データベース層の分離

データベース層 ( Weaviate がデプロイされる場所 ) は、機密データが保存される可能性があるため強化されたセキュリティが必要です。

- インターネットルートを持たないプライベートサブネット  
- データベースアクティビティの監視と監査ログ  
- 定期的なセキュリティパッチ適用と脆弱性評価  
- 制限付きアクセスの隔離サブネットにバックアップシステム  

#### 監視インフラストラクチャ

集中型の監視と可観測性インフラストラクチャは、インシデント時のブラインドスポットを防ぐため特別な配慮が必要です。

- 隔離サブネットにより監視システムの侵害を防止  
- 監視システム用の独立した管理アクセス経路  
- 監視システムへのラテラルムーブメントを防ぐネットワークレベルの隔離  
- 監視データを許可された担当者のみに制限するアクセス制御  

### VPC エンドポイントとプライベート接続

CloudWatch VPC エンドポイントを実装することで監視データのインターネット経路を排除できます。設定には以下が必要です。

- それぞれのアベイラビリティゾーンへのインターフェイス VPC エンドポイントのデプロイ  
- サービス統合を円滑にする DNS 解決の設定  
- 監視ソースからの HTTPS トラフィックを許可するセキュリティグループルール  
- CloudWatch API コールを VPC エンドポイントにルーティングするルートテーブル設定  

#### セキュリティ上の利点

- 監視データがパブリックインターネットに到達しません。  
- インターネットゲートウェイ依存性の排除により攻撃対象領域が縮小します。  
- 監視データ伝送に対するネットワークレベルのアクセス制御。  
- データ所在要件への準拠。  

#### 安全なデータ操作のための S3 VPC エンドポイント

バックアップやアプリケーションデータの転送を保護するため、以下を設定します。

- S3 トラフィックを VPC エンドポイントへ誘導するルートテーブルエントリ  
- VPC エンドポイント経由のアクセスに制限するバケットポリシー  
- S3 リソースへアクセス可能なサービスを制御する IAM ポリシー  
- すべての S3 API 操作を記録する CloudTrail ログ  

#### パフォーマンスとセキュリティの最適化

- S3 トラフィックに関する NAT ゲートウェイコストを排除  
- AWS 経由のデータ転送性能を向上  
- インターネット経由のデータ流出を防止するネットワークレベルの保護  
- コンプライアンス監視用の AWS Config との統合  



### スケーリングとパフォーマンス戦略

#### アプリケーションロードバランサー ( ALB ) 構成

#### SSL/TLS 管理

- AWS Certificate Manager による証明書の自動プロビジョニング。
- すべての接続で PFS を有効化。
- HTTP から HTTPS へのリダイレクトにより暗号化されていない通信を防止。

#### WAF 連携

- 一般的な Web 脆弱性から保護する WAF ルール。
- アプリケーション固有の脅威パターンに基づくカスタムルール。
- OWASP Top 10 を保護するマネージドルールセット。
- ブロックされたリクエストのリアルタイムメトリクスとアラート。

#### ヘルスチェック構成

- サービス機能を検証するアプリケーション固有のヘルスチェック。
- データベース接続性を確保する多層ヘルスチェック。
- スケーリングイベント中に不健全なターゲットを優雅に処理。
- 詳細なサービス状態を提供するカスタムヘルスチェックエンドポイント。

### オートスケーリングのセキュリティ考慮事項

安全なスケーリングポリシーにより、キャパシティ変更時でもセキュリティポスチャを維持します。

#### スケーリングトリガー

- セキュリティ調整済みしきい値による CPU 使用率。
- セキュリティツールのオーバーヘッドを考慮したメモリ使用率。
- セキュリティイベントレートなどのカスタムメトリクス。
- 過去のパターンと脅威インテリジェンスに基づく予測スケーリング。

#### スケーリング時のセキュリティ

- 新規インスタンスへのセキュリティグループを自動更新。
- user data スクリプトによるセキュリティツールのデプロイ。
- 一貫したセキュリティベースラインを確保する構成管理。
- 新規インスタンスを即時に可視化するモニタリング統合。

### 高可用性とディザスタリカバリ

#### マルチ AZ アーキテクチャ

#### Weaviate 構成

- ** 最小 ** で 3 レプリカを AZ 間に分散。
- 自動フェイルオーバーおよび AZ 間レプリケーション。
- クロスリージョンレプリケーション付き S3 への自動バックアップ。

### 可観測性とモニタリング

#### Grafana インフラ

- システム健全性とセキュリティメトリクスの集中ダッシュボード。
- 通知疲労を防ぐ階層化アラート。
- インシデントレスポンスシステムとの統合。

#### ネットワーク可視性

- セキュリティ分析用トラフィックメタデータを取得する VPC フローログ。
- リアルタイムストリーミングによる SIEM への送信。
- ベースライン確立と異常検知。

#### セキュリティモニタリング

- 振る舞い分析と脅威インテリジェンスによる脅威検出。
- 自動インシデント作成とレスポンスワークフロー。
- フォレンジックデータの収集と保持機能。

### サービスメッシュセキュリティ

#### Istio 実装

Istio はサービス間通信に包括的なセキュリティと可観測性を提供するサービスメッシュです。

#### 主な機能

- ** 相互 TLS (mTLS):** すべてのサービス通信を自動で暗号化・認証。
- ** 証明書管理:** プロビジョニング、ローテーション、失効を自動化。
- ** アイデンティティ検証:** 通信確立前にポッドレベルで認証。

Istio にはゼロトラストモデルもあり、以下の特徴があります:

- 明示的な通信許可を必要とするデフォルト deny-all ポリシー。
- すべてのサービスリクエストに対する継続的なアイデンティティ検証。
- セキュリティとデプロイ要件をサポートするきめ細かなトラフィックポリシー。

#### 利点

- アプリケーションコードの変更なしで暗号化を実現。
- すべてのサービスにわたる集中ポリシー強制。
- 詳細なトラフィック分析とセキュリティモニタリング。

### Kubernetes ネットワークポリシー

#### Calico または Cilium 実装

- ポッドレベルのセグメンテーションによる高度なネットワークポリシー。
- 最適なパフォーマンスを実現する eBPF ベースの強制。
- HTTP / gRPC をサポートするアプリケーション認識型ポリシー。

#### ポリシーフレームワーク

- ** デフォルト deny:** すべてのトラフィックをデフォルトでブロック。
- ** ネームスペース分離:** 無許可のクロスネームスペース通信を防止。
- ** 選択的許可:** 必要な通信の明示的ルール。
- ** GitOps 運用:** バージョン管理されたポリシーのデプロイとテスト。

#### 実装

- ネットワークポリシーはポッド間のラテラルムーブメントを防止。
- 一貫した強制を実現するサービスメッシュとの統合。
- 定期的なポリシー監査と最適化。
- ポリシー効果を確保する自動テスト。

### フレームワーク整合性

当社の AWS 固有のベストプラクティスは次のセキュリティフレームワークと整合しています:

- ** NIST Cybersecurity Framework:** 識別、保護、検知、対応、復旧の全機能を網羅。
- ** ISO 27001:** 情報セキュリティマネジメントシステムの実装。
- ** SOC 2:** セキュリティ、可用性、機密性に関する Trust Services Criteria 準拠。

### 追加リソースおよび情報

- [監視ドキュメント](../configuration/monitoring.md)
- [レプリケーションドキュメント](../configuration/replication.md)
- [バックアップドキュメント](../configuration/backups.md)

## 質問およびフィードバック

import DocsFeedback from '/_includes/docs-feedback.mdx';

<DocsFeedback/>

