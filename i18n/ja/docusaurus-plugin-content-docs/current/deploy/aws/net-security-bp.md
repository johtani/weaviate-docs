---
title: ネットワーク セキュリティのベスト プラクティス
description: "Weaviate デプロイメントでネットワーク セキュリティを最大化するための専門的な推奨事項。"

---

# ベスト プラクティスとヒント

このページでは、Weaviate デプロイメント向けの AWS 固有のネットワーク ベスト プラクティスをまとめています。ここでは、Weaviate デプロイメントを保護するために設計されたネットワーク セキュリティ アーキテクチャを概説します。

:::tip 

- 一般的なベスト プラクティスが必要な場合は [こちら](/docs/weaviate/best-practices/index.md) をご覧ください。

- デプロイメント固有のベスト プラクティスが必要な場合は [こちら](/docs/deploy/faqs/index.md) をご覧ください。

:::

### 堅牢なネットワーク セキュリティ アーキテクチャが実現すること: 

- ネットワーク セグメンテーションとアクセス制御によって攻撃対象領域を最小化します。  
- セキュリティ境界を維持しつつ自動スケーリングを可能にします。  
- 包括的なディザスター リカバリにより高可用性を確保します。  
- エンドツーエンドの可観測性と脅威検出を提供します。  
- 安全な管理アクセス パターンを確立します。  

### アクセス制御

アクセス制御は本ネットワーク セキュリティ戦略の要です。ゼロトラスト モデルを採用し、すべてのアクセス要求を継続的に検証します。

#### プライベート サブネット戦略

ネットワーク分離は本戦略の基盤です。重要なインフラストラクチャはインターネットに直接接続しないプライベート サブネット内に配置します。これによりインターネット経由の攻撃を排除し、すべてのアクセスを制御されたエントリ ポイント経由に限定します。

#### コア コンポーネント

- 制御されたアウトバウンド インターネット アクセスを提供する NAT ゲートウェイ付きプライベート サブネット  
- すべての管理アクセスに対する多要素認証 (MFA)  
- きめ細かな権限制御で最小権限の原則を実施するセキュリティ グループ  
- WAF を統合した ALB  

#### アクセス パターン

- ロード バランサーおよびセキュリティ グループでフィルタリングされたインバウンド トラフィック  
- ロギング付き NAT ゲートウェイによるアウトバウンド トラフィックの制御  
- VPN と強力な認証を必須とする管理アクセス  
- 組織構造に合わせた RBAC  

#### 安全な管理アクセスのための VPN 戦略

- 企業オフィス接続用の site-to-site VPN  
- 管理アクセス用に個別証明書を用いた client VPN  
- 高可用性を確保するマルチ AZ VPN ゲートウェイ  

### Kubernetes アクセス制御

#### 管理コントロール

- すべての `kubectl` アクセスには確立済み VPN 接続が必須  
- 企業 IDPs との統合  
- すべての管理操作に対する MFA  
- セッション タイムアウトとアクティビティ モニタリング  

### 多層防御を伴うネットワーク アーキテクチャ

ネットワーク セグメンテーションによりセキュリティ境界を形成し、侵害の影響範囲を限定します。この多層防御戦略では水平・垂直の両方でセグメンテーションを実装します。

#### アプリケーション階層のセグメンテーション

アプリケーション階層には、顧客向けサービスおよびビジネス ロジック コンポーネントを配置します。

- 環境ごと (開発・ステージング・本番) に専用サブネットを作成  
- すべての HTTP/HTTPS トラフィックを検査する WAF  
- Kubernetes ネットワーク ポリシーによるコンテナ ネットワーク分離  
- API ゲートウェイによる認証およびレート制限の強制  

#### データベース階層の分離

Weaviate がデプロイされるデータベース階層は、機密データを格納する可能性があるため、より強化されたセキュリティを必要とします。

- インターネット ルートを持たないプライベート サブネット  
- データベース アクティビティの監視と監査ログ  
- 定期的なセキュリティ パッチ適用と脆弱性評価  
- 制限付きアクセスの隔離サブネットにあるバックアップ システム  

#### モニタリング基盤

集中型モニタリングおよび可観測性基盤では、セキュリティ インシデント時の盲点を防ぐ特別な配慮が必要です。

- モニタリング システムの侵害を防ぐ隔離サブネット  
- モニタリング システム専用の管理アクセス経路  
- モニタリング システムへの横移動を防ぐネットワーク レベルの分離  
- 許可された関係者のみにモニタリング データを限定するアクセス制御  

### VPC エンドポイントとプライベート接続

CloudWatch VPC エンドポイントを実装するとモニタリング データのインターネット ルーティングを排除できます。設定には以下が必要です。

- 各アベイラビリティー ゾーンへのインターフェイス VPC エンドポイントのデプロイ  
- シームレスなサービス統合のための DNS 解決設定  
- モニタリング ソースからの HTTPS トラフィックを許可するセキュリティ グループ ルール  
- CloudWatch API 呼び出しを VPC エンドポイントへ誘導するルート テーブル設定  

#### セキュリティ上の利点

- モニタリング データがパブリック インターネットに到達しません。  
- インターネット ゲートウェイへの依存を排除し、攻撃対象領域を縮小します。  
- モニタリング データ送信に対するネットワーク レベルのアクセス制御。  
- データ レジデンシー要件への準拠。  

#### 安全なデータ処理のための S3 VPC エンドポイント

バックアップおよびアプリケーション データの転送を保護するため、以下の設定が必要です。

- S3 トラフィックを VPC エンドポイントに誘導するルート テーブル エントリ  
- VPC エンドポイント トラフィックにアクセスを制限するバケット ポリシー  
- どのサービスが S3 リソースへアクセスできるかを制御する IAM ポリシー  
- すべての S3 API 操作を記録する CloudTrail ログ  

#### パフォーマンスとセキュリティの最適化

- S3 トラフィックに対する NAT ゲートウェイ コストを排除  
- AWS 経由のデータ転送性能を向上  
- インターネット経由のデータ流出を防ぐネットワーク レベルの保護  
- コンプライアンス監視のため AWS Config と統合  

### スケーリングおよびパフォーマンス戦略

#### Application Load Balancer (ALB) の構成

#### SSL/TLS 管理

- AWS Certificate Manager による証明書の自動プロビジョニング。
- すべての接続で PFS を有効化。
- HTTP から HTTPS へのリダイレクトにより暗号化されていない通信を防止。

#### WAF 統合

- 一般的な Web 脆弱性から保護する WAF ルール。
- アプリケーション固有の脅威パターンに基づくカスタムルール。
- OWASP Top 10 を保護するマネージドルールセット。
- ブロックされたリクエストに関するリアルタイムメトリクスとアラート。

#### ヘルスチェック構成

- サービス機能を検証するアプリケーション固有のヘルスチェック。
- データベース接続を保証するマルチティアヘルスチェック。
- スケーリングイベント時に非正常ターゲットをグレースフルに処理。
- 詳細なサービス状態を提供するカスタムヘルスチェックエンドポイント。

### オートスケーリングのセキュリティ考慮事項

キャパシティ変更時でもセキュリティ体制を維持する安全なスケーリングポリシーです。

#### スケーリングトリガー

- セキュリティ調整済みしきい値による CPU 使用率。
- セキュリティツールオーバーヘッドを考慮したメモリ使用率。
- セキュリティイベント率を含むカスタムメトリクス。
- 過去のパターンと脅威インテリジェンスに基づく予測スケーリング。

#### スケーリング中のセキュリティ

- 新しいインスタンスへのセキュリティグループを自動更新。
- ユーザーデータスクリプトによるセキュリティツールのデプロイ。
- 一貫したセキュリティベースラインを保証する構成管理。
- 新規インスタンスの可視性を即時に提供するモニタリング統合。

### 高可用性およびディザスタリカバリ

#### マルチ AZ アーキテクチャ

#### Weaviate 構成

-  **Minimum** 3 個のレプリカを AZ 間で分散。
- 自動フェイルオーバーおよび AZ 間レプリケーション。
- クロスリージョンレプリケーションを備えた S3 への自動バックアップ。

### オブザーバビリティおよびモニタリング

#### Grafana インフラストラクチャ

- システムヘルスとセキュリティメトリクスを可視化する集中ダッシュボード。
- 通知疲れを防止する階層化アラート。
- インシデントレスポンスシステムとの統合。

#### ネットワーク可視性

- セキュリティ分析用にトラフィックメタデータを取得する VPC フローログ。
- SIEM への Real0time ストリーミング。
- ベースライン確立と異常検知。

#### セキュリティモニタリング

- 行動分析と脅威インテリジェンスによる脅威検出。
- インシデントの自動生成とレスポンスワークフロー。
- フォレンジックデータの収集および保存機能。

### サービスメッシュのセキュリティ

#### Istio 実装

Istio は、サービス間通信に対して包括的なセキュリティとオブザーバビリティを提供するサービスメッシュです。

#### 主な機能

- **Mutual TLS (mTLS)：** すべてのサービス通信を自動で暗号化および認証。
- **Certificate management：** 証明書の自動プロビジョニング、ローテーション、失効。
- **Identity verification：** 通信確立前の Pod レベル認証。

Istio にはゼロトラストモデルもあり、次の機能を備えています：

- すべて拒否をデフォルトとし、明示的な通信許可を要求。
- すべてのサービスリクエストに対する継続的な ID 検証。
- セキュリティおよびデプロイ要件をサポートする細粒度のトラフィックポリシー。

#### 利点

- アプリケーションコードを変更せずに暗号化を実現。
- すべてのサービスにわたるポリシーの集中施行。
- 詳細なトラフィック分析とセキュリティモニタリング。

### Kubernetes ネットワークポリシー

#### Calico または Cilium 実装

- Pod レベルのセグメンテーションに対応した高度なネットワークポリシー機能。
- 最適なパフォーマンスを実現する eBPF ベースの適用。
- HTTP/gRPC をサポートするアプリケーション認識型ポリシー。

#### ポリシーフレームワーク

- **Default deny：** すべてのトラフィックをデフォルトでブロック。
- **Namespace isolation：** 不正なクロスネームスペース通信を防止。
- **Selective allow：** 必要な通信のための明示的なルール。
- **GitOps management：** バージョン管理されたポリシーのデプロイとテスト。

#### 実装

- ネットワークポリシーは Pod 間のラテラルムーブメントを防ぐ必要があります。
- サービスメッシュとの統合による一貫した施行。
- 定期的なポリシー監査と最適化。
- ポリシーの有効性を保証する自動テスト。

### フレームワーク整合性

当社の AWS 固有のベストプラクティスは、以下のセキュリティフレームワークと整合しています：

- **NIST Cybersecurity framework：** Identify、Protect、Detect、Respond、Recover の機能を完全に網羅。
- **ISO 27001：** 情報セキュリティマネジメントシステムの実装。
- **SOC 2：** セキュリティ、可用性、機密性に関する Trust Services Criteria への準拠。

### 追加リソースおよび情報

- [監視ドキュメント](../configuration/monitoring.md)
- [レプリケーションドキュメント](../configuration/replication.md)
- [バックアップドキュメント](../configuration/backups.md)

## 質問とフィードバック

import DocsFeedback from '/_includes/docs-feedback.mdx';

<DocsFeedback/>

